<!DOCTYPE html>
<html lang="en">
<head>
    <%- include("./partials/head.ejs") %>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog </title>
</head>
<body>
    <%- include("./partials/nav") %> <%- include("./partials/script") %>
    <div class="container mt-4">
        <h1><%= blog.title %></h1>
            <img src="<%= blog.coverImageUrl %>" 
                 style="width: 400px; height: 400px; object-fit: cover;" 
                 alt="coverImageUrl">
        <p class="mt-3"><%= blog.body %></p>
    </div>
    <div class="container mt-3">
        <img src="<%= blog.createdBy.profileImageURL %>" alt="profileImage" width="80px"><%= blog.createdBy.fullName %>
    </div>
    <div class="container mt-3">
        <h1>Comments (<%= comments.length%>)</h1>

       <% if (locals.user) { %>
        <form action="comment/<%= blog._id %>" method="post">
            <div class="mb-3">
              <input name="content" type="text" placeholder="Enter Your Comment" class="form-control" id="content" aria-describedby="content">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
          </form>
       <% } %>
    </div>
    <div class="container mt-3">
        <% comments.forEach(comment => { %>
            <img src="<%= comment.createdBy.profileImageURL %>" width="50px">
            <%= comment.createdBy.fullName %> <p><%= comment.content %></p>
            
    <% }) %>
    </div>
    </div>
</html>